<template>
      <view class="page__bd">
          <view class="weui-tab">
              <view class="weui-navbar">
                  <block wx:for="{{tabs}}" wx:key="*this">
                      <view id="{{index}}" class="weui-navbar__item {{activeIndex == index ? 'weui-bar__item_on' : ''}}" bindtap="tabClick">
                          <view class="weui-navbar__title">{{item}}</view>
                      </view>
                  </block>
                  <view class="weui-navbar__slider" style="left: {{sliderLeft}}px; transform: translateX({{sliderOffset}}px); -webkit-transform: translateX({{sliderOffset}}px);"></view>
              </view>
              <view class="weui-tab__panel">
                  <view class="weui-tab__content" hidden="{{activeIndex != 0}}">
                    <wxc-flex cross="center">
                      <view class="howTo">
                        <wxc-label type="fill" type-color="#a6d3ff">ç”ŸæˆäºŒç»´ç </wxc-label>
                        <view></view>
                        <image class="howTo_pic" src="../../images/howGenerate.png"></image>
                      </view>
                      <view class="howTo">
                        <wxc-label type="fill" type-color="#ff5349">æ‰«æäºŒç»´ç </wxc-label>
                        <view></view>
                        <image class="howTo_pic" src="../../images/howScan.png"></image>
                      </view>
                    </wxc-flex>
                    <wxc-loadmore is-end="{{true}}" text="Â·"></wxc-loadmore>
                    <view class="share">
                      <view>å¦‚æœä½ è§‰å¾—è¿™ä¸ªå°ç¨‹åºä¸é”™ï¼Œæ¬¢è¿åˆ†äº«ç»™å¥½å‹~</view>
                      <button height="20px" size="mini" type="default" open-type="share" plain="true">åˆ†äº«/Share</button>
                    </view>
                  </view>
                  <view class="weui-tab__content" hidden="{{activeIndex != 1}}">
                    <view class="aboutHead" bindtap="isTap">
                      <image src='https://images.gxuann.cn/qrcode/gxuann.jpg' class="gxuann"></image>
                      <view><image src='../../images/foot.png' class="foot"></image></view>
                    </view>
                    <wxc-loadmore is-end="{{true}}" text="Â·"></wxc-loadmore>
                    <wxc-label class="versionLabel" type="fill" type-color="#a6d3ff">å½“å‰ç‰ˆæœ¬</wxc-label>
                    <wxc-label class="versionLabel" type="fill" type-color="#ff5349">v3.5</wxc-label>
                    <view class="versionGroup">
                      <view class="versionNum">v3.5</view>
                      <view class="versionDetail">- ä¿®å¤åé¦ˆç³»ç»Ÿ</view>
                      <view class="versionNum">v3.4</view>
                      <view class="versionDetail">- åé¦ˆç³»ç»Ÿæ¥å…¥ã€Œåä¸ªæ§½ç¤¾åŒºã€</view>
                      <view class="versionNum">v3.3</view>
                      <view class="versionDetail">- ä¼˜åŒ–åé¦ˆåŠŸèƒ½</view>
                      <view class="versionDetail">- å¢åŠ æ— ç½‘ç»œæƒ…å†µä¸‹çš„æç¤º</view>
                      <view class="versionNum">v3.2</view>
                      <view class="versionDetail">- æ·»åŠ å¯åŠ¨é¡µ</view>
                      <view class="versionNum">v3.1</view>
                      <view class="versionDetail">- ç”ŸæˆäºŒç»´ç çš„å†…å®¹é‡Œæ”¯æŒemojiäº†</view>
                      <view class="versionNum">v3.0</view>
                      <view class="versionDetail">- é‡æ–°è®¾è®¡äº†ç•Œé¢:ç»“åˆä½¿ç”¨äº†MinUI & WeUI</view>
                      <view class="versionDetail">- æ·»åŠ äº†æ‰«æäºŒç»´ç çš„åŠŸèƒ½</view>
                      <view class="versionNum">v2.8</view>
                      <view class="versionDetail">- æ›´æ–°äº†åˆ†äº«é¡µé¢çš„å›¾ç‰‡</view>
                      <view class="versionNum">v2.7</view>
                      <view class="versionDetail">- åˆ é™¤å›¾ç‰‡æ°´å°</view>
                      <view class="versionNum">v2.6</view>
                      <view class="versionDetail">- ä¿®å¤bug:ç©ºå†…å®¹ç”Ÿæˆ(null)çš„äºŒç»´ç </view>
                      <view class="versionNum">v2.5</view>
                      <view class="versionDetail">- ä¿®å¤bug:åé¦ˆåŠŸèƒ½æäº¤å¤±è´¥</view>
                      <view class="versionNum">v2.4</view>
                      <view class="versionDetail">- ç»†èŠ‚è°ƒæ•´</view>
                      <view class="versionNum">v2.3</view>
                      <view class="versionDetail">- æ·»åŠ åé¦ˆåŠŸèƒ½</view>
                      <view class="versionNum">v2.2</view>
                      <view class="versionDetail">- ä¿®å¤bug:ShowLoadingæ˜¾ç¤ºé—®é¢˜</view>
                      <view class="versionDetail">- ä¿®æ”¹ç•Œé¢</view>
                      <view class="versionNum">v2.1</view>
                      <view class="versionDetail">- ä¿®å¤bug:</view>
                      <view class="versionNum">v2.0</view>
                      <view class="versionDetail">- æ·»åŠ å›¾ç‰‡ä¿å­˜åŠŸèƒ½</view>
                      <view class="versionDetail">- æ·»åŠ å›¾ç‰‡é¢„è§ˆåŠŸèƒ½</view>
                      <view class="versionNum">v1.1</view>
                      <view class="versionDetail">- çº æ­£æ–‡æœ¬é”™è¯¯</view>
                      <view class="versionNum">v1.0</view>
                      <view class="versionDetail">- äºŒç»´ç æš‚ä¸å¯ä¿å­˜ï¼Œè¯·æˆªå›¾ä¿å­˜</view>
                    </view>
                    <wxc-loadmore is-end="{{true}}" text="åˆ°åº•äº†ï½" icon="{{true}}"></wxc-loadmore>
                  </view>
              </view>
          </view>
      </view>
</template>

<script>
var sliderWidth = 105;
export default {
  config: {
    navigationBarTitleText: 'å…³äº&è¯´æ˜',
    usingComponents: {
      'wxc-flex': '@minui/wxc-flex',
      'wxc-label': '@minui/wxc-label',
      'wxc-icon': '@minui/wxc-icon',
      'wxc-loadmore': '@minui/wxc-loadmore'
    }
  },
  data: {
    tabs: ["ä½¿ç”¨æ–¹æ³•", "ChangeLog"],
      activeIndex: 0,
      sliderOffset: 0,
      sliderLeft: 0,
      isEgg: 0,
  },
  onLoad: function () {
    var that = this;
    wx.getSystemInfo({
        success: function(res) {
            that.setData({
                sliderLeft: (res.windowWidth / that.data.tabs.length - sliderWidth) / 2,
                sliderOffset: res.windowWidth / that.data.tabs.length * that.data.activeIndex
            });
        }
    });
  },
  tabClick: function (e) {
      this.setData({
          sliderOffset: e.currentTarget.offsetLeft,
          activeIndex: e.currentTarget.id
      });
  },
  isTap: function(e){
    var that = this;
    var isEgg =this.data.isEgg;
    wx.vibrateShort({
      success: function(e) {
        if (isEgg < 7) {
          that.setData({
            isEgg: isEgg + 1,
        })
        }
        switch (isEgg) {
          case 1:
            wx.showToast({
              title: 'å—¯ï¼ŸğŸ¤”',
              icon: 'none',
              duration: 1000
            })
            break;
          case 2:
            wx.showToast({
              title: 'å—¯!ğŸ˜¶',
              icon: 'none',
              duration: 1000
            })
            break;
          case 3:
            wx.showToast({
              title: 'Whatï¼ŸğŸ˜®',
              icon: 'none',
              duration: 1000
            })
            break;
          case 4:
            wx.showToast({
              title: 'è¿™é‡Œæ²¡æœ‰ä¸œè¥¿ï¼ğŸ˜‘',
              icon: 'none',
              duration: 1000
            })
            break;
          case 5:
            wx.showToast({
              title: 'åˆ«ç‚¹äº† ğŸ˜µ',
              icon: 'none',
              duration: 1000
            })
            break;
          case 6:
            wx.showToast({
              title: 'congratulationsï¼ğŸ‘',
              icon: 'none',
              duration: 1000
            })
            break;
          default:
            wx.showToast({
              title: 'â€¦â€¦',
              icon: 'none',
              duration: 1000
            })
            break;
        }
      }
    })
    if (isEgg >= 6) {
      setTimeout(function () {
        wx.navigateTo({
          url: '../../pages/egg/index'
        }) 
      }, 1000)
    }
    console.log(isEgg);
  },
  onShareAppMessage: function () {
    return {
      title: 'QRäºŒç»´ç ',
      path: '/pages/menu/index',
      imageUrl: 'https://images.gxuann.cn/qrcode/share.png'
    }
  }
}
</script>

<style>
page,
.page,
.page__bd{
    height: 100%;
}
.page__bd{
    padding-bottom: 0;
}
.weui-navbar{
  background: #ffffff;
}
.weui-tab__content{
    padding-top: 60rpx;
    text-align: center;
}
.howTo{
  margin: auto;
}
.item {
   min-width: 100rpx;
   min-height: 100rpx;
   font-size: 22rpx;
   text-align: center;
 }
 .versionGroup{
   text-align: left;
   margin-left: 30rpx;
   color: #666666;
 }
 .versionNum{
   margin-top: 20rpx;
   font-size: 28rpx;
   font-weight: bold;
 }
 .versionDetail{
   font-size: 20rpx;
 }
 .wrap{
   display: block;
 }
.aboutHead{
  font-size: 20rpx;
  text-align: center;
  color: #666666;
  margin:auto;
}
.aboutHead_pic{
  width: 15rpx;
  height: 15rpx;
}
.gxuann{
  width: 35rpx;
  height: 35rpx;
}
.howTo_pic{
  width: 225rpx;
  height: 600rpx;
}
.share{
  font-size: 20rpx;
  margin-bottom: 20rpx;
}
.foot{
  width: 197px;
  height: 54px;
}
</style>
